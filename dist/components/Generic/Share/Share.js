"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{twMerge as t}from"@rentalhost/nolva-core";import{useEffect as i,useState as o}from"react";import{FaShareFromSquare as s}from"react-icons/fa6";import{Ready as a}from"../Ready/Ready.js";import{networks as n}from"./ShareNetwork.js";import{ShareNetworkIcon as c}from"./ShareNetworkIcon.js";import{listenWindowEvent as m}from"../../../services/EventService.js";import{listenMutationObserver as l}from"../../../services/MutationService.js";import{getSimplifiedUrl as d}from"../../../services/UrlService.js";let p=Object.keys(n);export function Share({text:f="Share",title:u,url:h,networks:v=p,networkClassName:g,className:j,onShare:w}){let[S,k]=o(u??""),[x,y]=o(h??""),[N,b]=o([]);return i(()=>{b(!v.includes("native")||"share"in navigator?v:[...v].filter(e=>"native"!==e))},[v]),i(()=>{if(void 0===u)return l(document.querySelector("title"),{childList:!0},()=>{k(document.title)})},[u]),i(()=>{if(void 0===h)return m("popstate",()=>{y(d())})},[h]),e(a,{children:r("div",{"data-component":"Share",className:t("bg-theme-100 text-theme-500 grid grid-cols-[1fr_auto] justify-between rounded p-2 shadow",j),children:[r("div",{className:"grid grid-cols-[auto_1fr] items-center",children:[e(s,{className:"size-5 mx-2"}),e("p",{children:f})]}),e("div",{className:"grid grid-cols-[repeat(var(--networks-count),1fr)] gap-2 text-white",style:{"--networks-count":N.length},suppressHydrationWarning:!0,children:N.map(r=>e(c,{network:n[r],title:S,url:x,className:g,onClick:()=>{w?.(r,x,S)}},r))})]})})}