"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{useEffect as t,useMemo as i,useState as s}from"react";import{FaShareFromSquare as o}from"react-icons/fa6";import{networks as a}from"./ShareNetwork.js";import{ShareNetworkIcon as c}from"./ShareNetworkIcon.js";import{listenWindowEvent as n}from"../../../services/EventService.js";import{listenMutationObserver as m}from"../../../services/MutationService.js";import{twMerge as l}from"../../../services/TailwindMergeService.js";import{getSimplifiedUrl as d}from"../../../services/UrlService.js";export function Share({text:f="Share",title:p,url:u,networks:v=Object.keys(a),networkClassName:h,className:g,onShare:j}){let[w,S]=s(p??""),[k,x]=s(u??""),N=i(()=>!v.includes("native")||"share"in navigator?v:v.filter(e=>"native"!==e),[v]);return t(()=>{if(void 0===p)return m(document.querySelector("title"),{childList:!0},()=>{S(document.title)})},[p]),t(()=>{if(void 0===u)return n("popstate",()=>{x(d())})},[u]),r("div",{"data-component":"Share",className:l("bg-theme-100 text-theme-500 grid grid-cols-[1fr_auto] justify-between rounded p-2 shadow",g),children:[r("div",{className:"grid grid-cols-[auto_1fr] items-center",children:[e(o,{className:"size-5 mx-2"}),e("p",{children:f})]}),e("div",{className:"grid grid-cols-[repeat(var(--networks-count),1fr)] gap-2 text-white",style:{"--networks-count":N.length},children:N.map(r=>e(c,{network:a[r],title:w,url:k,className:h,onClick:()=>{j?.(r,k,w)}},r))})]})}