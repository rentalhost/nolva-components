"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{useEffect as t,useState as i}from"react";import{FaShareFromSquare as s}from"react-icons/fa6";import{Ready as o}from"../Ready/Ready.js";import{networks as a}from"./ShareNetwork.js";import{ShareNetworkIcon as n}from"./ShareNetworkIcon.js";import{listenWindowEvent as c}from"../../../services/EventService.js";import{listenMutationObserver as m}from"../../../services/MutationService.js";import{twMerge as l}from"../../../services/TailwindMergeService.js";import{getSimplifiedUrl as d}from"../../../services/UrlService.js";let p=Object.keys(a);export function Share({text:f="Share",title:u,url:v,networks:h=p,networkClassName:g,className:j,onShare:w}){let[S,k]=i(u??""),[x,y]=i(v??""),[N,b]=i([]);return t(()=>{b(!h.includes("native")||"share"in navigator?h:[...h].filter(e=>"native"!==e))},[h]),t(()=>{if(void 0===u)return m(document.querySelector("title"),{childList:!0},()=>{k(document.title)})},[u]),t(()=>{if(void 0===v)return c("popstate",()=>{y(d())})},[v]),e(o,{children:r("div",{"data-component":"Share",className:l("bg-theme-100 text-theme-500 grid grid-cols-[1fr_auto] justify-between rounded p-2 shadow",j),children:[r("div",{className:"grid grid-cols-[auto_1fr] items-center",children:[e(s,{className:"size-5 mx-2"}),e("p",{children:f})]}),e("div",{className:"grid grid-cols-[repeat(var(--networks-count),1fr)] gap-2 text-white",style:{"--networks-count":N.length},suppressHydrationWarning:!0,children:N.map(r=>e(n,{network:a[r],title:S,url:x,className:g,onClick:()=>{w?.(r,x,S)}},r))})]})})}