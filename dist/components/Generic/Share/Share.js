"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{useEffect as t,useState as i}from"react";import{FaShareFromSquare as s}from"react-icons/fa6";import{networks as o}from"./ShareNetwork.js";import{ShareNetworkIcon as a}from"./ShareNetworkIcon.js";import{listenWindowEvent as n}from"../../../services/EventService.js";import{listenMutationObserver as c}from"../../../services/MutationService.js";import{twMerge as m}from"../../../services/TailwindMergeService.js";import{getSimplifiedUrl as l}from"../../../services/UrlService.js";let d=Object.keys(o);export function Share({text:p="Share",title:u,url:f,networks:v=d,networkClassName:h,className:g,onShare:j}){let[w,S]=i(u??""),[k,x]=i(f??""),[N,y]=i([]);return t(()=>{y(!v.includes("native")||"share"in navigator?v:[...v].filter(e=>"native"!==e))},[v]),t(()=>{if(void 0===u)return c(document.querySelector("title"),{childList:!0},()=>{S(document.title)})},[u]),t(()=>{if(void 0===f)return n("popstate",()=>{x(l())})},[f]),r("div",{"data-component":"Share",className:m("bg-theme-100 text-theme-500 grid grid-cols-[1fr_auto] justify-between rounded p-2 shadow",g),children:[r("div",{className:"grid grid-cols-[auto_1fr] items-center",children:[e(s,{className:"size-5 mx-2"}),e("p",{children:p})]}),e("div",{className:"grid grid-cols-[repeat(var(--networks-count),1fr)] gap-2 text-white",style:{"--networks-count":N.length},suppressHydrationWarning:!0,children:N.map(r=>e(a,{network:o[r],title:w,url:k,className:h,onClick:()=>{j?.(r,k,w)}},r))})]})}