"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{twMerge as t}from"@rentalhost/nolva-core";import{useCallback as n,useEffect as o,useMemo as i,useRef as a,useState as s}from"react";import{FaBars as c,FaXmark as l}from"react-icons/fa6";import{listenWindowEvent as m}from"../../../services/EventService.js";import{useImmediateRef as d}from"../../../services/hooks/useImmediateRef.js";import{useReady as u}from"../../../services/hooks/useReady.js";import{promisePortal as v}from"../../../services/PortalService.js";export function HeaderNav({navClassName:f,listClassName:p,children:h,icon:x=e(c,{}),iconClassName:y,closedIcon:g=e(l,{}),closedIconClassName:j,openedModalContent:b}){let N=u(),k=a(null),[w,z]=s(!0),[E,H]=s(!1),R=a(null),S=n(()=>{H(r=>(r?(R.current?.(),R.current=null):v(r=>(R.current=r,e("div",{className:"contents","data-overlay":!0,children:b(r)}))).then(()=>{H(!1)}),!r))},[b]),W=d(S),A=d(E);o(()=>{if(!N)return;let e=m(["resize","transitionend"],e=>{"resize"===e.type&&A.current&&W.current(),z(k.current.scrollWidth>k.current.clientWidth)}),r=m("click",e=>{e.target instanceof Element&&"A"===e.target.tagName&&e.target.closest("[data-overlay]")&&W.current()},!1);return()=>{e(),r()}},[W,N,A]);let C=i(()=>w||E,[w,E]);return N&&r("nav",{ref:k,"data-forcing-overlay":E||void 0,"data-component":"HeaderNav",className:t("overflow-hidden text-nowrap relative flex",f),children:[e("ul",{className:t("flex items-center justify-between gap-x-6 flex-nowrap transition",C&&"opacity-0 pointer-events-none",p),children:h}),e("div",{className:t("transition select-none absolute right-0 inset-y-0 flex items-center justify-center",!C&&"opacity-0 pointer-events-none",y,E&&j),onClick:()=>{S()},children:e("div",{className:"border-theme-200 bg-theme-200/50 active:bg-theme-300/50 hover:border-theme-300 active:border-theme-400 cursor-pointer rounded-full border p-2 transition",children:E?g:x})})]})}