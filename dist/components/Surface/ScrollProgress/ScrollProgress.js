"use client";import{jsx as e,Fragment as r,jsxs as o}from"react/jsx-runtime";import{clamp as t}from"@rentalhost/nolva-core";import{useEffect as s,useMemo as i,useRef as l,useState as n}from"react";import{createPortal as c}from"react-dom";import{listenWindowEvent as m}from"../../../services/EventService.js";import{useReady as a}from"../../../services/hooks/useReady.js";import{twMerge as d}from"../../../services/TailwindMergeService.js";export function ScrollProgress({className:p,progressClassName:f,children:g,onProgress:h,onCompleted:v}){let u=l(null),j=a(),[x,S]=n(0);s(()=>{if(j)return m(["scroll","resize"],()=>{let e=u.current?.getBoundingClientRect();if(void 0!==e){let r=1/e.height*t(window.innerHeight-e.top,0,e.height);S(r),h?.(r),1===r&&v?.()}})},[j,v,h]);let w=i(()=>e("div",{"data-component":"ScrollProgressBar",className:d("fixed top-0 left-0 h-1 w-(--progress) bg-theme-400",f),style:{"--progress":`${100*x}%`}}),[x,f]);return j&&o(r,{children:[c(w,document.body),e("div",{ref:u,"data-completed":1===x||void 0,"data-component":"ScrollProgress",className:p,children:g})]})}