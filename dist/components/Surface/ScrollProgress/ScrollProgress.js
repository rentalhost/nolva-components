"use client";import{jsx as e,Fragment as r,jsxs as o}from"react/jsx-runtime";import{clamp as t,twMerge as s}from"@rentalhost/nolva-core";import{useEffect as i,useMemo as n,useRef as l,useState as a}from"react";import{createPortal as c}from"react-dom";import{listenWindowScroll as m}from"../../../services/EventService.js";import{useReady as d}from"../../../services/hooks/useReady.js";export function ScrollProgress({className:p,progressClassName:f,children:g,onProgress:h,onCompleted:u}){let v=l(null),w=d(),[x,j]=a(0);i(()=>{if(w)return m(()=>{let e=v.current?.getBoundingClientRect();if(void 0!==e){let r=e.top+window.scrollY,o=Math.max(window.innerHeight-r,0),s=e.height-o,i=1/s*t(window.innerHeight-e.top-o,0,s);j(i),h?.(i),1===i&&u?.()}})},[w,u,h]);let S=n(()=>e("div",{"data-component":"ScrollProgressBar",className:s("fixed top-0 left-0 h-1 w-(--progress) bg-theme-400",f),style:{"--progress":`${100*x}%`}}),[x,f]);return w&&o(r,{children:[c(S,document.body),e("div",{ref:v,"data-completed":1===x||void 0,"data-component":"ScrollProgress",className:p,children:g})]})}