"use client";import{jsx as e,Fragment as r,jsxs as t}from"react/jsx-runtime";import{clamp as o,twMerge as s}from"@rentalhost/nolva-core";import{useEffect as i,useMemo as n,useRef as l,useState as c}from"react";import{createPortal as m}from"react-dom";import{listenWindowScroll as a}from"../../../services/EventService.js";import{useReady as d}from"../../../services/hooks/useReady.js";export function ScrollProgress({className:p,progressClassName:f,children:g,onProgress:h,onCompleted:u}){let v=l(null),j=d(),[x,S]=c(0);i(()=>{if(j)return a(()=>{let e=v.current?.getBoundingClientRect();if(void 0!==e){let r=1/e.height*o(window.innerHeight-e.top,0,e.height);S(r),h?.(r),1===r&&u?.()}})},[j,u,h]);let w=n(()=>e("div",{"data-component":"ScrollProgressBar",className:s("fixed top-0 left-0 h-1 w-(--progress) bg-theme-400",f),style:{"--progress":`${100*x}%`}}),[x,f]);return j&&t(r,{children:[m(w,document.body),e("div",{ref:v,"data-completed":1===x||void 0,"data-component":"ScrollProgress",className:p,children:g})]})}