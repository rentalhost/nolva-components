"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{twMerge as t}from"@rentalhost/nolva-core";import{Children as i,useCallback as o,useEffect as l,useMemo as n,useRef as s,useState as a}from"react";import{FaAngleLeft as d}from"react-icons/fa6";import{Autoplay as c,FreeMode as m,Keyboard as p}from"swiper/modules";import{Swiper as f,SwiperSlide as u}from"swiper/react";import{Pagination as h}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as g}from"../../../services/EventService.js";import{useReady as b}from"../../../services/hooks/useReady.js";import{normalizeBreakpoints as y}from"../../../services/SwiperService.js";export function Slider({duration:S=5e3,speed:x=300,items:N=1,gap:j=.5,infinity:k=!0,freeFlow:w=!1,stretch:C=!0,centered:E=!0,className:A,arrowsIcon:M=e(d,{}),arrowsStepMode:z="sequential",arrowsClassName:T,arrowsPlacement:I="overlay",arrowsPlacementFallback:P="overlay",pagination:R="after",paginationClassName:W,paginationCompressed:q=!0,paginationLimit:B,children:D=[],onNavigate:_}){let F=b(),G=s(null),L=s(null),[O,V]=a(0),[X,H]=a(Number.MAX_SAFE_INTEGER),J=n(()=>i.toArray(D).filter(Boolean),[D]),K=n(()=>y(J.length,N,j,C),[J.length,j,N,C]),[Q,U]=a(),[Y,Z]=a(!1),$=n(()=>J.length>X,[J.length,X]),ee=n(()=>$?Y||"external"!==I?I:P:"disabled",[$,I,P,Y]),er=o(e=>{let r="sequential"===z?1:X,t=(O+J.length+e*r)%J.length;Q.slideTo(t),_?.()},[z,O,J.length,_,Q,X]),et=n(()=>q?Math.ceil(J.length/X):J.length,[J.length,q,X]),ei=n(()=>q?et>1:$,[$,q,et]);return l(()=>F?g("resize",()=>{null!==G.current&&null!==L.current&&Z(G.current.offsetWidth+3*L.current.offsetWidth<=document.body.offsetWidth)}):void 0,[F]),F&&r("div",{"data-component":"Slider",className:t("relative",A),children:[r("div",{ref:G,className:"relative flex",children:[e(v,{ref:L,icon:M,className:T,placement:ee,isDisabled:!k&&0===O,onClick:()=>{er(-1)}}),e(f,{onSwiper:U,loop:k&&$,autoplay:0!==S&&{delay:S,pauseOnMouseEnter:!0},breakpoints:K,modules:[c,p,...w?[m]:[]],centerInsufficientSlides:E,freeMode:{enabled:w,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:x*X,onSlideChange:({realIndex:e})=>{V(e)},onTouchEnd:()=>{_?.()},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&H(e)},className:t("flex-1",!Q&&"hidden"),children:J.map((r,t)=>e(u,{children:r},t))}),e(v,{rotate:!0,icon:M,className:T,placement:ee,isDisabled:!k&&0===O,onClick:()=>{er(1)}})]}),ei&&e("div",{className:t("z-10",!1===R&&"hidden","overlay"===R&&"absolute inset-x-0 bottom-0",W),children:e(h,{current:q?O===J.length-X?et:Math.ceil((O+1)/X):O+1,total:et,visibleCount:B,spread:q?void 0:X-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{_?.(),Q.slideTo(q?(e-1)*X:e-1)}})})]})}