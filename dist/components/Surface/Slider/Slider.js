"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as t,useEffect as o,useMemo as a,useRef as l,useState as s}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as d,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as f}from"swiper/react";import{twMerge as u}from"tailwind-merge";import{Pagination as v}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as b}from"./SliderArrow.js";import{listenWindowEvent as h}from"../../../services/EventService.js";import{normalizeBreakpoints as S}from"../../../services/SwiperService.js";export function Slider({duration:x=5e3,items:y=1,gap:N=.5,infinity:w=!0,stretch:j=!0,centered:k=!0,className:g,arrowsIcon:C=e(n,{}),arrowsStepMode:E="sequential",arrowsClassName:M,arrowsPlacement:z="overlay",arrowsPlacementFallback:A="overlay",pagination:I="after",paginationClassName:P,paginationCompressed:T=!0,paginationLimit:W,children:q=[]}){let D=l(null),R=l(null),[_,B]=s(0),[F,G]=s(Number.MAX_SAFE_INTEGER),L=a(()=>r.count(q),[q]),O=a(()=>S(L,y,N,j),[N,y,L,j]),[V,X]=s(),[H,J]=s(!1),K=a(()=>L>F,[L,F]),Q=a(()=>K?H||"external"!==z?z:A:"disabled",[K,z,A,H]),U=t(e=>{let i=(_+L+e*("sequential"===E?1:F))%L;V.slideTo(i)},[E,_,L,V,F]),Y=a(()=>T?Math.ceil(L/F):L,[L,T,F]),Z=a(()=>T?Y>1:K,[K,T,Y]);return o(()=>h("resize",()=>{null!==D.current&&null!==R.current&&J(D.current.offsetWidth+3*R.current.offsetWidth<=document.body.offsetWidth)}),[]),i("div",{"data-component":"Slider",className:u("relative",g),children:[i("div",{ref:D,className:"relative flex",children:[e(b,{ref:R,icon:C,className:M,placement:Q,isDisabled:!w&&0===_,onClick:()=>{U(-1)}}),e(p,{onSwiper:X,loop:w&&K,autoplay:0!==x&&{delay:x,pauseOnMouseEnter:!0},breakpoints:O,modules:[c,d,m],centerInsufficientSlides:k,freeMode:{enabled:!0,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,onSlideChange:({realIndex:e})=>{B(e)},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&G(e)},className:u("flex-1",!V&&"hidden"),children:r.map(q,(i,r)=>e(f,{children:i},r))}),e(b,{rotate:!0,icon:C,className:M,placement:Q,isDisabled:!w&&0===_,onClick:()=>{U(1)}})]}),Z&&e("div",{className:u("z-10",!1===I&&"hidden","overlay"===I&&"absolute inset-x-0 bottom-0",P),children:e(v,{current:T?_===L-F?Y:Math.ceil((_+1)/F):_+1,total:Y,visibleCount:W,spread:T?void 0:F-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{V.slideTo(T?(e-1)*F:e-1)}})})]})}