"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as o,useEffect as t,useMemo as l,useRef as s,useState as a}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as m,Keyboard as d}from"swiper/modules";import{Swiper as p,SwiperSlide as f}from"swiper/react";import{twMerge as u}from"tailwind-merge";import{Pagination as v}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as b}from"./SliderArrow.js";import{listenWindowEvent as h}from"../../../services/EventService.js";import{normalizeBreakpoints as x}from"../../../services/SwiperService.js";export function Slider({duration:y=5e3,items:N=1,gap:S=.5,infinity:w=!0,stretch:j=!0,centered:k=!0,className:g,arrowsIcon:C=e(n,{}),arrowsStepMode:E="sequential",arrowsClassName:M,arrowsPlacement:z="overlay",arrowsPlacementFallback:A="overlay",pagination:I="after",paginationClassName:L,paginationCompressed:P=!0,paginationLimit:T,children:W=[]}){let q=s(null),D=s(null),[R,_]=a(0),[B,F]=a(Number.MAX_SAFE_INTEGER),G=l(()=>r.count(W),[W]),O=l(()=>x(G,N,S,j),[S,N,G,j]),[V,X]=a(),[H,J]=a(!1),K=l(()=>G>B,[G,B]),Q=l(()=>K?H||"external"!==z?z:A:"disabled",[K,z,A,H]),U=o(e=>{let i="sequential"===E?1:B;V.slideToLoop((R+G+e*i)%G)},[E,R,G,V,B]),Y=l(()=>P?Math.ceil(G/B):G,[G,P,B]),Z=l(()=>P?Y>1:K,[K,P,Y]);return t(()=>h("resize",()=>{null!==q.current&&null!==D.current&&J(q.current.offsetWidth+3*D.current.offsetWidth<=document.body.offsetWidth)}),[]),i("div",{className:u("relative",g),children:[i("div",{ref:q,className:"relative flex",children:[e(b,{ref:D,icon:C,className:M,placement:Q,isDisabled:!w&&0===R,onClick:()=>{U(-1)}}),e(p,{onSwiper:X,loop:w&&K,autoplay:0!==y&&{delay:y,pauseOnMouseEnter:!0},breakpoints:O,modules:[c,m,d],centerInsufficientSlides:k,freeMode:{enabled:!0,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,onSlideChange:({realIndex:e})=>{_(e)},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&F(e)},className:"flex-1",children:r.map(W,(i,r)=>e(f,{children:i},r))}),e(b,{rotate:!0,icon:C,className:M,placement:Q,isDisabled:!w&&0===R,onClick:()=>{U(1)}})]}),Z&&e("div",{className:u("z-10",!1===I&&"hidden","overlay"===I&&"absolute inset-x-0 bottom-0",L),children:e(v,{current:P?R===G-B?Y:Math.ceil((R+1)/B):R+1,total:Y,visibleCount:T,spread:P?void 0:B-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{V.slideToLoop(P?(e-1)*B:e-1)}})})]})}