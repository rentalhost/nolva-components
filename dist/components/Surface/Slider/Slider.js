"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as t,useEffect as o,useMemo as s,useRef as a,useState as l}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as d,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as f}from"swiper/react";import{Pagination as u}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as b}from"../../../services/EventService.js";import{normalizeBreakpoints as h}from"../../../services/SwiperService.js";import{twMerge as S}from"../../../services/TailwindMergeService.js";export function Slider({duration:x=5e3,items:y=1,gap:N=.5,infinity:j=!0,stretch:w=!0,centered:k=!0,className:g,arrowsIcon:C=e(n,{}),arrowsStepMode:M="sequential",arrowsClassName:E,arrowsPlacement:z="overlay",arrowsPlacementFallback:A="overlay",pagination:T="after",paginationClassName:I,paginationCompressed:P=!0,paginationLimit:W,children:q=[]}){let D=a(null),R=a(null),[_,B]=l(0),[F,G]=l(Number.MAX_SAFE_INTEGER),L=s(()=>r.count(q),[q]),O=s(()=>h(L,y,N,w),[N,y,L,w]),[V,X]=l(),[H,J]=l(!1),K=s(()=>L>F,[L,F]),Q=s(()=>K?H||"external"!==z?z:A:"disabled",[K,z,A,H]),U=t(e=>{let i=(_+L+e*("sequential"===M?1:F))%L;V.slideTo(i)},[M,_,L,V,F]),Y=s(()=>P?Math.ceil(L/F):L,[L,P,F]),Z=s(()=>P?Y>1:K,[K,P,Y]);return o(()=>b("resize",()=>{null!==D.current&&null!==R.current&&J(D.current.offsetWidth+3*R.current.offsetWidth<=document.body.offsetWidth)}),[]),i("div",{"data-component":"Slider",className:S("relative",g),children:[i("div",{ref:D,className:"relative flex",children:[e(v,{ref:R,icon:C,className:E,placement:Q,isDisabled:!j&&0===_,onClick:()=>{U(-1)}}),e(p,{onSwiper:X,loop:j&&K,autoplay:0!==x&&{delay:x,pauseOnMouseEnter:!0},breakpoints:O,modules:[c,d,m],centerInsufficientSlides:k,freeMode:{enabled:!0,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,onSlideChange:({realIndex:e})=>{B(e)},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&G(e)},className:S("flex-1",!V&&"hidden"),children:r.map(q,(i,r)=>e(f,{children:i},r))}),e(v,{rotate:!0,icon:C,className:E,placement:Q,isDisabled:!j&&0===_,onClick:()=>{U(1)}})]}),Z&&e("div",{className:S("z-10",!1===T&&"hidden","overlay"===T&&"absolute inset-x-0 bottom-0",I),children:e(u,{current:P?_===L-F?Y:Math.ceil((_+1)/F):_+1,total:Y,visibleCount:W,spread:P?void 0:F-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{V.slideTo(P?(e-1)*F:e-1)}})})]})}