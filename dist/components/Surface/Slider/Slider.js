"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as t,useEffect as o,useMemo as s,useRef as a,useState as l}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as d,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as f}from"swiper/react";import{Pagination as u}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as b}from"../../../services/EventService.js";import{normalizeBreakpoints as h}from"../../../services/SwiperService.js";import{twMerge as S}from"../../../services/TailwindMergeService.js";export function Slider({duration:x=5e3,speed:y=300,items:N=1,gap:j=.5,infinity:w=!0,freeFlow:k=!1,stretch:g=!0,centered:C=!0,className:M,arrowsIcon:E=e(n,{}),arrowsStepMode:z="sequential",arrowsClassName:A,arrowsPlacement:T="overlay",arrowsPlacementFallback:I="overlay",pagination:P="after",paginationClassName:W,paginationCompressed:q=!0,paginationLimit:D,children:R=[],onNavigate:_}){let B=a(null),F=a(null),[G,L]=l(0),[O,V]=l(Number.MAX_SAFE_INTEGER),X=s(()=>r.count(R),[R]),H=s(()=>h(X,N,j,g),[j,N,X,g]),[J,K]=l(),[Q,U]=l(!1),Y=s(()=>X>O,[X,O]),Z=s(()=>Y?Q||"external"!==T?T:I:"disabled",[Y,T,I,Q]),$=t(e=>{let i=(G+X+e*("sequential"===z?1:O))%X;J.slideTo(i),_?.()},[z,G,X,_,J,O]),ee=s(()=>q?Math.ceil(X/O):X,[X,q,O]),ei=s(()=>q?ee>1:Y,[Y,q,ee]);return o(()=>b("resize",()=>{null!==B.current&&null!==F.current&&U(B.current.offsetWidth+3*F.current.offsetWidth<=document.body.offsetWidth)}),[]),i("div",{"data-component":"Slider",className:S("relative",M),children:[i("div",{ref:B,className:"relative flex",children:[e(v,{ref:F,icon:E,className:A,placement:Z,isDisabled:!w&&0===G,onClick:()=>{$(-1)}}),e(p,{onSwiper:K,loop:w&&Y,autoplay:0!==x&&{delay:x,pauseOnMouseEnter:!0},breakpoints:H,modules:[c,m,...k?[d]:[]],centerInsufficientSlides:C,freeMode:{enabled:k,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:y*O,onSlideChange:({realIndex:e})=>{L(e)},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&V(e)},className:S("flex-1",!J&&"hidden"),children:r.map(R,(i,r)=>e(f,{children:i},r))}),e(v,{rotate:!0,icon:E,className:A,placement:Z,isDisabled:!w&&0===G,onClick:()=>{$(1)}})]}),ei&&e("div",{className:S("z-10",!1===P&&"hidden","overlay"===P&&"absolute inset-x-0 bottom-0",W),children:e(u,{current:q?G===X-O?ee:Math.ceil((G+1)/O):G+1,total:ee,visibleCount:D,spread:q?void 0:O-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{_?.(),J.slideTo(q?(e-1)*O:e-1)}})})]})}