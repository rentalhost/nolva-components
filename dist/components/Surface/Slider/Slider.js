"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as o,useEffect as t,useMemo as s,useRef as l,useState as a}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as d,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as u}from"swiper/react";import{Pagination as f}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as b}from"../../../services/EventService.js";import{normalizeBreakpoints as h}from"../../../services/SwiperService.js";import{twMerge as S}from"../../../services/TailwindMergeService.js";export function Slider({duration:x=5e3,speed:y=300,items:N=1,gap:j=.5,infinity:w=!0,freeFlow:k=!1,stretch:M=!0,centered:E=!0,className:g,arrowsIcon:C=e(n,{}),arrowsStepMode:T="sequential",arrowsClassName:z,arrowsPlacement:A="overlay",arrowsPlacementFallback:I="overlay",pagination:P="after",paginationClassName:W,paginationCompressed:q=!0,paginationLimit:D,children:R=[],onNavigate:_}){let B=l(null),F=l(null),[G,L]=a(0),[O,V]=a(Number.MAX_SAFE_INTEGER),X=s(()=>r.count(R),[R]),H=s(()=>h(X,N,j,M),[j,N,X,M]),[J,K]=a(),[Q,U]=a(!1),Y=s(()=>X>O,[X,O]),Z=s(()=>Y?Q||"external"!==A?A:I:"disabled",[Y,A,I,Q]),$=o(e=>{let i=(G+X+e*("sequential"===T?1:O))%X;J.slideTo(i),_?.()},[T,G,X,_,J,O]),ee=s(()=>q?Math.ceil(X/O):X,[X,q,O]),ei=s(()=>q?ee>1:Y,[Y,q,ee]);return t(()=>b("resize",()=>{null!==B.current&&null!==F.current&&U(B.current.offsetWidth+3*F.current.offsetWidth<=document.body.offsetWidth)}),[]),i("div",{"data-component":"Slider",className:S("relative",g),children:[i("div",{ref:B,className:"relative flex",children:[e(v,{ref:F,icon:C,className:z,placement:Z,isDisabled:!w&&0===G,onClick:()=>{$(-1)}}),e(p,{onSwiper:K,loop:w&&Y,autoplay:0!==x&&{delay:x,pauseOnMouseEnter:!0},breakpoints:H,modules:[c,m,...k?[d]:[]],centerInsufficientSlides:E,freeMode:{enabled:k,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:y*O,onSliderMove:({realIndex:e})=>{L(e)},onTouchEnd:()=>{_?.()},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&V(e)},className:S("flex-1",!J&&"hidden"),children:r.map(R,(i,r)=>e(u,{children:i},r))}),e(v,{rotate:!0,icon:C,className:z,placement:Z,isDisabled:!w&&0===G,onClick:()=>{$(1)}})]}),ei&&e("div",{className:S("z-10",!1===P&&"hidden","overlay"===P&&"absolute inset-x-0 bottom-0",W),children:e(f,{current:q?G===X-O?ee:Math.ceil((G+1)/O):G+1,total:ee,visibleCount:D,spread:q?void 0:O-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{_?.(),J.slideTo(q?(e-1)*O:e-1)}})})]})}