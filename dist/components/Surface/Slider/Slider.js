"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as t,useEffect as o,useMemo as s,useRef as a,useState as l}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as d,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as f}from"swiper/react";import{Pagination as u}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as b}from"../../../services/EventService.js";import{normalizeBreakpoints as h}from"../../../services/SwiperService.js";import{twMerge as S}from"../../../services/TailwindMergeService.js";export function Slider({duration:x=5e3,speed:y=300,items:N=1,gap:j=.5,infinity:w=!0,stretch:k=!0,centered:g=!0,className:C,arrowsIcon:M=e(n,{}),arrowsStepMode:E="sequential",arrowsClassName:z,arrowsPlacement:A="overlay",arrowsPlacementFallback:T="overlay",pagination:I="after",paginationClassName:P,paginationCompressed:W=!0,paginationLimit:q,children:D=[]}){let R=a(null),_=a(null),[B,F]=l(0),[G,L]=l(Number.MAX_SAFE_INTEGER),O=s(()=>r.count(D),[D]),V=s(()=>h(O,N,j,k),[j,N,O,k]),[X,H]=l(),[J,K]=l(!1),Q=s(()=>O>G,[O,G]),U=s(()=>Q?J||"external"!==A?A:T:"disabled",[Q,A,T,J]),Y=t(e=>{let i=(B+O+e*("sequential"===E?1:G))%O;X.slideTo(i)},[E,B,O,X,G]),Z=s(()=>W?Math.ceil(O/G):O,[O,W,G]),$=s(()=>W?Z>1:Q,[Q,W,Z]);return o(()=>b("resize",()=>{null!==R.current&&null!==_.current&&K(R.current.offsetWidth+3*_.current.offsetWidth<=document.body.offsetWidth)}),[]),i("div",{"data-component":"Slider",className:S("relative",C),children:[i("div",{ref:R,className:"relative flex",children:[e(v,{ref:_,icon:M,className:z,placement:U,isDisabled:!w&&0===B,onClick:()=>{Y(-1)}}),e(p,{onSwiper:H,loop:w&&Q,autoplay:0!==x&&{delay:x,pauseOnMouseEnter:!0},breakpoints:V,modules:[c,d,m],centerInsufficientSlides:g,freeMode:{enabled:!0,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:y*G,onSlideChange:({realIndex:e})=>{F(e)},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&L(e)},className:S("flex-1",!X&&"hidden"),children:r.map(D,(i,r)=>e(f,{children:i},r))}),e(v,{rotate:!0,icon:M,className:z,placement:U,isDisabled:!w&&0===B,onClick:()=>{Y(1)}})]}),$&&e("div",{className:S("z-10",!1===I&&"hidden","overlay"===I&&"absolute inset-x-0 bottom-0",P),children:e(u,{current:W?B===O-G?Z:Math.ceil((B+1)/G):B+1,total:Z,visibleCount:q,spread:W?void 0:G-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{X.slideTo(W?(e-1)*G:e-1)}})})]})}