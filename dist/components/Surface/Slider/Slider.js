"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as o,useEffect as s,useMemo as t,useRef as a,useState as l}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as d,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as u}from"swiper/react";import{Pagination as f}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as h}from"../../../services/EventService.js";import{useReady as b}from"../../../services/hooks/useReady.js";import{normalizeBreakpoints as S}from"../../../services/SwiperService.js";import{twMerge as y}from"../../../services/TailwindMergeService.js";export function Slider({duration:x=5e3,speed:N=300,items:j=1,gap:k=.5,infinity:w=!0,freeFlow:g=!1,stretch:C=!0,centered:E=!0,className:M,arrowsIcon:T=e(n,{}),arrowsStepMode:z="sequential",arrowsClassName:A,arrowsPlacement:I="overlay",arrowsPlacementFallback:P="overlay",pagination:R="after",paginationClassName:W,paginationCompressed:q=!0,paginationLimit:D,children:_=[],onNavigate:B}){let F=b(),G=a(null),L=a(null),[O,V]=l(0),[X,H]=l(Number.MAX_SAFE_INTEGER),J=t(()=>r.count(_),[_]),K=t(()=>S(J,j,k,C),[k,j,J,C]),[Q,U]=l(),[Y,Z]=l(!1),$=t(()=>J>X,[J,X]),ee=t(()=>$?Y||"external"!==I?I:P:"disabled",[$,I,P,Y]),ei=o(e=>{let i=(O+J+e*("sequential"===z?1:X))%J;Q.slideTo(i),B?.()},[z,O,J,B,Q,X]),er=t(()=>q?Math.ceil(J/X):J,[J,q,X]),eo=t(()=>q?er>1:$,[$,q,er]);return s(()=>F?h("resize",()=>{null!==G.current&&null!==L.current&&Z(G.current.offsetWidth+3*L.current.offsetWidth<=document.body.offsetWidth)}):void 0,[F]),F&&i("div",{"data-component":"Slider",className:y("relative",M),children:[i("div",{ref:G,className:"relative flex",children:[e(v,{ref:L,icon:T,className:A,placement:ee,isDisabled:!w&&0===O,onClick:()=>{ei(-1)}}),e(p,{onSwiper:U,loop:w&&$,autoplay:0!==x&&{delay:x,pauseOnMouseEnter:!0},breakpoints:K,modules:[c,m,...g?[d]:[]],centerInsufficientSlides:E,freeMode:{enabled:g,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:N*X,onSlideChange:({realIndex:e})=>{V(e)},onTouchEnd:()=>{B?.()},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&H(e)},className:y("flex-1",!Q&&"hidden"),children:r.map(_,(i,r)=>e(u,{children:i},r))}),e(v,{rotate:!0,icon:T,className:A,placement:ee,isDisabled:!w&&0===O,onClick:()=>{ei(1)}})]}),eo&&e("div",{className:y("z-10",!1===R&&"hidden","overlay"===R&&"absolute inset-x-0 bottom-0",W),children:e(f,{current:q?O===J-X?er:Math.ceil((O+1)/X):O+1,total:er,visibleCount:D,spread:q?void 0:X-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{B?.(),Q.slideTo(q?(e-1)*X:e-1)}})})]})}