"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{twMerge as i}from"@rentalhost/nolva-core";import{Children as t,useCallback as o,useEffect as l,useMemo as n,useRef as s,useState as a}from"react";import{FaAngleLeft as d}from"react-icons/fa6";import{Autoplay as c,FreeMode as m,Keyboard as p}from"swiper/modules";import{Swiper as f,SwiperSlide as u}from"swiper/react";import{Pagination as h}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as g}from"../../../services/EventService.js";import{useReady as b}from"../../../services/hooks/useReady.js";import{normalizeBreakpoints as y}from"../../../services/SwiperService.js";export function Slider({duration:S=5e3,speed:x=300,items:N=1,gap:w=.5,infinity:j=!0,freeFlow:k=!1,stretch:A=!0,centered:C=!0,className:E,arrowsIcon:M=e(d,{}),arrowsStepMode:P="sequential",arrowsClassName:z,arrowsPlacement:I="overlay",arrowsPlacementFallback:T="overlay",pagination:R="after",paginationClassName:V,paginationCompressed:W=!0,paginationLimit:q,children:B=[],onNavigate:D}){let _=b(),F=s(null),G=s(null),[L,O]=a(0),[X,H]=a(Number.MAX_SAFE_INTEGER),J=n(()=>t.toArray(B).filter(Boolean),[B]),K=n(()=>y(J.length,N,w,A),[J.length,w,N,A]),[Q,U]=a(),[Y,Z]=a(!1),$=n(()=>J.length>X,[J.length,X]),ee=n(()=>$?Y||"external"!==I?I:T:"disabled",[$,I,T,Y]),er=o(e=>{let r="sequential"===P?1:X,i=(L+J.length+e*r)%J.length;Q.slideTo(i),D?.()},[P,L,J.length,D,Q,X]),ei=n(()=>W?Math.ceil(J.length/X):J.length,[J.length,W,X]),et=n(()=>W?ei>1:$,[$,W,ei]),eo=o(e=>{"number"==typeof e&&H(e)},[]);return l(()=>_?g("resize",()=>{null!==F.current&&null!==G.current&&Z(F.current.offsetWidth+3*G.current.offsetWidth<=document.body.offsetWidth)}):void 0,[_]),_&&r("div",{"data-component":"Slider",className:i("relative",E),children:[r("div",{ref:F,className:"relative flex",children:[e(v,{ref:G,icon:M,className:z,placement:ee,isDisabled:!j&&0===L,onClick:()=>{er(-1)}}),e(f,{onSwiper:U,loop:j&&$,autoplay:0!==S&&{delay:S,pauseOnMouseEnter:!0},breakpoints:K,modules:[c,p,...k?[m]:[]],centerInsufficientSlides:C,freeMode:{enabled:k,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:x*X,onSlideChange:({realIndex:e})=>{O(e)},onTouchEnd:()=>{D?.()},onAfterInit:e=>{eo(e.params.slidesPerView)},onResize:e=>{eo(e.params.slidesPerView)},className:i("flex-1",!Q&&"hidden"),children:J.map((r,i)=>e(u,{children:r},i))}),e(v,{rotate:!0,icon:M,className:z,placement:ee,isDisabled:!j&&0===L,onClick:()=>{er(1)}})]}),et&&e("div",{className:i("z-10",!1===R&&"hidden","overlay"===R&&"absolute inset-x-0 bottom-0",V),children:e(h,{current:W?L===J.length-X?ei:Math.ceil((L+1)/X):L+1,total:ei,visibleCount:q,spread:W?void 0:X-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{D?.(),Q.slideTo(W?(e-1)*X:e-1)}})})]})}