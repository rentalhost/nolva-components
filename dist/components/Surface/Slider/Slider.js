"use client";import{jsx as e,jsxs as i}from"react/jsx-runtime";import{Children as r,useCallback as t,useEffect as o,useMemo as s,useRef as a,useState as l}from"react";import{FaAngleLeft as n}from"react-icons/fa6";import{Autoplay as c,FreeMode as d,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as f}from"swiper/react";import{Pagination as u}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as v}from"./SliderArrow.js";import{listenWindowEvent as b}from"../../../services/EventService.js";import{normalizeBreakpoints as h}from"../../../services/SwiperService.js";import{twMerge as S}from"../../../services/TailwindMergeService.js";export function Slider({duration:x=5e3,speed:y=300,items:N=1,gap:j=.5,infinity:w=!0,freeFlow:k=!1,stretch:g=!0,centered:C=!0,className:M,arrowsIcon:E=e(n,{}),arrowsStepMode:z="sequential",arrowsClassName:A,arrowsPlacement:T="overlay",arrowsPlacementFallback:I="overlay",pagination:P="after",paginationClassName:W,paginationCompressed:q=!0,paginationLimit:D,children:R=[]}){let _=a(null),B=a(null),[F,G]=l(0),[L,O]=l(Number.MAX_SAFE_INTEGER),V=s(()=>r.count(R),[R]),X=s(()=>h(V,N,j,g),[j,N,V,g]),[H,J]=l(),[K,Q]=l(!1),U=s(()=>V>L,[V,L]),Y=s(()=>U?K||"external"!==T?T:I:"disabled",[U,T,I,K]),Z=t(e=>{let i=(F+V+e*("sequential"===z?1:L))%V;H.slideTo(i)},[z,F,V,H,L]),$=s(()=>q?Math.ceil(V/L):V,[V,q,L]),ee=s(()=>q?$>1:U,[U,q,$]);return o(()=>b("resize",()=>{null!==_.current&&null!==B.current&&Q(_.current.offsetWidth+3*B.current.offsetWidth<=document.body.offsetWidth)}),[]),i("div",{"data-component":"Slider",className:S("relative",M),children:[i("div",{ref:_,className:"relative flex",children:[e(v,{ref:B,icon:E,className:A,placement:Y,isDisabled:!w&&0===F,onClick:()=>{Z(-1)}}),e(p,{onSwiper:J,loop:w&&U,autoplay:0!==x&&{delay:x,pauseOnMouseEnter:!0},breakpoints:X,modules:[c,m,...k?[d]:[]],centerInsufficientSlides:C,freeMode:{enabled:k,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:y*L,onSlideChange:({realIndex:e})=>{G(e)},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&O(e)},className:S("flex-1",!H&&"hidden"),children:r.map(R,(i,r)=>e(f,{children:i},r))}),e(v,{rotate:!0,icon:E,className:A,placement:Y,isDisabled:!w&&0===F,onClick:()=>{Z(1)}})]}),ee&&e("div",{className:S("z-10",!1===P&&"hidden","overlay"===P&&"absolute inset-x-0 bottom-0",W),children:e(u,{current:q?F===V-L?$:Math.ceil((F+1)/L):F+1,total:$,visibleCount:D,spread:q?void 0:L-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{H.slideTo(q?(e-1)*L:e-1)}})})]})}