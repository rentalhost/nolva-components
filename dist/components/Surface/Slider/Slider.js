"use client";import{jsx as e,jsxs as r}from"react/jsx-runtime";import{Children as i,useCallback as t,useEffect as l,useMemo as o,useRef as n,useState as s}from"react";import{FaAngleLeft as a}from"react-icons/fa6";import{Autoplay as d,FreeMode as c,Keyboard as m}from"swiper/modules";import{Swiper as p,SwiperSlide as f}from"swiper/react";import{Pagination as u}from"../../Pagination/Pagination/Pagination.js";import{SliderArrow as h}from"./SliderArrow.js";import{listenWindowEvent as v}from"../../../services/EventService.js";import{useReady as g}from"../../../services/hooks/useReady.js";import{normalizeBreakpoints as b}from"../../../services/SwiperService.js";import{twMerge as y}from"../../../services/TailwindMergeService.js";export function Slider({duration:S=5e3,speed:x=300,items:N=1,gap:j=.5,infinity:k=!0,freeFlow:w=!1,stretch:C=!0,centered:E=!0,className:M,arrowsIcon:A=e(a,{}),arrowsStepMode:T="sequential",arrowsClassName:z,arrowsPlacement:I="overlay",arrowsPlacementFallback:P="overlay",pagination:R="after",paginationClassName:W,paginationCompressed:q=!0,paginationLimit:B,children:D=[],onNavigate:_}){let F=g(),G=n(null),L=n(null),[O,V]=s(0),[X,H]=s(Number.MAX_SAFE_INTEGER),J=o(()=>i.toArray(D).filter(Boolean),[D]),K=o(()=>b(J.length,N,j,C),[J.length,j,N,C]),[Q,U]=s(),[Y,Z]=s(!1),$=o(()=>J.length>X,[J.length,X]),ee=o(()=>$?Y||"external"!==I?I:P:"disabled",[$,I,P,Y]),er=t(e=>{let r="sequential"===T?1:X,i=(O+J.length+e*r)%J.length;Q.slideTo(i),_?.()},[T,O,J.length,_,Q,X]),ei=o(()=>q?Math.ceil(J.length/X):J.length,[J.length,q,X]),et=o(()=>q?ei>1:$,[$,q,ei]);return l(()=>F?v("resize",()=>{null!==G.current&&null!==L.current&&Z(G.current.offsetWidth+3*L.current.offsetWidth<=document.body.offsetWidth)}):void 0,[F]),F&&r("div",{"data-component":"Slider",className:y("relative",M),children:[r("div",{ref:G,className:"relative flex",children:[e(h,{ref:L,icon:A,className:z,placement:ee,isDisabled:!k&&0===O,onClick:()=>{er(-1)}}),e(p,{onSwiper:U,loop:k&&$,autoplay:0!==S&&{delay:S,pauseOnMouseEnter:!0},breakpoints:K,modules:[d,m,...w?[c]:[]],centerInsufficientSlides:E,freeMode:{enabled:w,sticky:!0},keyboard:{enabled:!0,onlyInViewport:!0},loopAddBlankSlides:!1,speed:x*X,onSlideChange:({realIndex:e})=>{V(e)},onTouchEnd:()=>{_?.()},onResize:({params:{slidesPerView:e}})=>{"number"==typeof e&&H(e)},className:y("flex-1",!Q&&"hidden"),children:J.map((r,i)=>e(f,{children:r},i))}),e(h,{rotate:!0,icon:A,className:z,placement:ee,isDisabled:!k&&0===O,onClick:()=>{er(1)}})]}),et&&e("div",{className:y("z-10",!1===R&&"hidden","overlay"===R&&"absolute inset-x-0 bottom-0",W),children:e(u,{current:q?O===J.length-X?ei:Math.ceil((O+1)/X):O+1,total:ei,visibleCount:B,spread:q?void 0:X-1,pageClassName:"text-[size:0] w-2.5",firstLast:!1,previousNext:!1,onClick:e=>{_?.(),Q.slideTo(q?(e-1)*X:e-1)}})})]})}