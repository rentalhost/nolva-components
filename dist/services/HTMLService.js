import{jsx as t,Fragment as e}from"react/jsx-runtime";import r,{domToReact as n,Element as a,Text as i}from"html-react-parser";import{setStyleProp as l}from"html-react-parser/lib/utilities";import{createElement as o,Fragment as s}from"react";let c=new Set(["style","class"]),f=["h1","h2","h3","h4","h5","h6","p","span","div","blockquote","pre","code","strong","em","u","small","figure","figcaption","ul","ol","li","br","table","thead","tbody","tfoot","tr","hr","sub","sup"],h=[["a",["href","target"]],["img",["src","alt"]],["video",["src"]],["iframe",["src"]],["th",["colspan","rowspan"]],["td",["colspan","rowspan"]]];export function transformHTML(m,u){let p=[...f.map(t=>[t]),...h,...u??[]],d=new Set(p.map(([t])=>t));function g(r){return r.map((r,l)=>r instanceof i?r.data:r instanceof a?t(s,{children:n([r],{replace:b})},l):t(e,{}))}function b(r){if(r instanceof i)return null;if(r instanceof a){let s=r.tagName.toLowerCase();if(!d.has(s))return t(e,{children:g(r.children)});let f={};for(let[t,e,l]of p)if(s===t){for(let[t,n]of Object.entries(r.attribs))(c.has(t)||e?.includes(t)===!0)&&(f[t]=n);if(l)return l(f,0===r.children.length?null:n(r.children.filter(t=>t instanceof a||t instanceof i),{replace:b}))}return"string"==typeof f.style&&l(f.style,f),o(r.tagName,f,0===r.children.length?null:g(r.children))}return t(e,{})}return r(m,{replace:b})}