"use client";import{deferPromise as e}from"@rentalhost/nolva-core";import{cloneElement as r}from"react";import{createRoot as o}from"react-dom/client";export async function promisePortal(r){let{promise:t,resolve:n}=e(),m=document.createElement("div"),l=o(m);return l.render(r(n)),document.body.appendChild(m),new Promise(e=>{t.then(e)}).finally(()=>{requestIdleCallback(()=>{l.unmount(),document.body.removeChild(m)})})}export async function promiseElement(e){return promisePortal(o=>r(e,{ref(e){null!==e&&requestAnimationFrame(()=>{o(e)})}}))}